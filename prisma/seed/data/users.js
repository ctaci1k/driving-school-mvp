// prisma/seed/data/users.ts

const { UserRole, UserStatus } = require('@prisma/client')
const bcrypt = require('bcryptjs')

const passwordHash = bcrypt.hashSync('password123', 10)

const users = [
  // ADMIN - no location needed (sees all)
  {
    id: 'admin-1',
    email: 'admin@drivingschool.pl',
    passwordHash,
    firstName: 'Admin',
    lastName: 'Główny',
    phone: '+48123456789',
    role: UserRole.ADMIN,
    status: UserStatus.ACTIVE,
    locationId: null, // Admin sees all locations
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-01-01'),
    updatedAt: new Date(),
  },

  // BRANCH MANAGERS - must have locationId
  {
    id: 'branch-manager-1',
    email: 'manager.warsaw@drivingschool.pl',
    passwordHash,
    firstName: 'Marek',
    lastName: 'Kierownik',
    phone: '+48111222333',
    role: UserRole.BRANCH_MANAGER,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1', // Warszawa Centrum
    address: 'ul. Marszałkowska 100',
    city: 'Warszawa',
    postalCode: '00-001',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-01-15'),
    updatedAt: new Date(),
  },

  // DISPATCHERS - should have locationId
  {
    id: 'dispatcher-1',
    email: 'dispatcher@drivingschool.pl',
    passwordHash,
    firstName: 'Ewa',
    lastName: 'Dyspozytorka',
    phone: '+48222333444',
    role: UserRole.DISPATCHER,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1', // Warszawa Centrum
    address: 'ul. Nowy Świat 15',
    city: 'Warszawa',
    postalCode: '00-002',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-02-01'),
    updatedAt: new Date(),
  },

  // INSTRUCTORS - with locationId
  {
    id: 'instructor-1',
    email: 'jan.kowalski@drivingschool.pl',
    passwordHash,
    firstName: 'Jan',
    lastName: 'Kowalski',
    phone: '+48501234567',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1', // Warszawa Centrum
    address: 'ul. Złota 44',
    city: 'Warszawa',
    postalCode: '00-120',
    licenseNumber: 'INS001',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-01-10'),
    updatedAt: new Date(),
  },
  {
    id: 'instructor-2',
    email: 'anna.nowak@drivingschool.pl',
    passwordHash,
    firstName: 'Anna',
    lastName: 'Nowak',
    phone: '+48502345678',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1', // Warszawa Centrum
    address: 'ul. Wspólna 50',
    city: 'Warszawa',
    postalCode: '00-125',
    licenseNumber: 'INS002',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: false,
    createdAt: new Date('2024-01-11'),
    updatedAt: new Date(),
  },
  {
    id: 'instructor-3',
    email: 'piotr.wisniewski@drivingschool.pl',
    passwordHash,
    firstName: 'Piotr',
    lastName: 'Wiśniewski',
    phone: '+48503456789',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-krakow-1', // Kraków
    address: 'ul. Długa 20',
    city: 'Kraków',
    postalCode: '30-001',
    licenseNumber: 'INS003',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-01-12'),
    updatedAt: new Date(),
  },
  {
    id: 'instructor-4',
    email: 'katarzyna.lewandowska@drivingschool.pl',
    passwordHash,
    firstName: 'Katarzyna',
    lastName: 'Lewandowska',
    phone: '+48504567890',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-wroclaw-1', // Wrocław
    address: 'ul. Ruska 15',
    city: 'Wrocław',
    postalCode: '50-001',
    licenseNumber: 'INS004',
    language: 'pl',
    emailNotifications: false,
    smsNotifications: true,
    createdAt: new Date('2024-01-13'),
    updatedAt: new Date(),
  },
  {
    id: 'instructor-5',
    email: 'tomasz.kaminski@drivingschool.pl',
    passwordHash,
    firstName: 'Tomasz',
    lastName: 'Kamiński',
    phone: '+48505678901',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-2', // Warszawa Mokotów
    address: 'ul. Puławska 100',
    city: 'Warszawa',
    postalCode: '02-500',
    licenseNumber: 'INS005',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-01-14'),
    updatedAt: new Date(),
  },
  {
    id: 'instructor-6',
    email: 'magdalena.wojcik@drivingschool.pl',
    passwordHash,
    firstName: 'Magdalena',
    lastName: 'Wójcik',
    phone: '+48506789012',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-poznan-1', // Poznań
    address: 'ul. Święty Marcin 30',
    city: 'Poznań',
    postalCode: '60-001',
    licenseNumber: 'INS006',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: false,
    createdAt: new Date('2024-01-15'),
    updatedAt: new Date(),
  },
  {
    id: 'instructor-7',
    email: 'robert.mazur@drivingschool.pl',
    passwordHash,
    firstName: 'Robert',
    lastName: 'Mazur',
    phone: '+48507890123',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-gdansk-1', // Gdańsk
    address: 'ul. Długa 45',
    city: 'Gdańsk',
    postalCode: '80-001',
    licenseNumber: 'INS007',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-01-16'),
    updatedAt: new Date(),
  },
  {
    id: 'instructor-8',
    email: 'agnieszka.krawczyk@drivingschool.pl',
    passwordHash,
    firstName: 'Agnieszka',
    lastName: 'Krawczyk',
    phone: '+48508901234',
    role: UserRole.INSTRUCTOR,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1', // Warszawa Centrum
    address: 'ul. Nowy Świat 30',
    city: 'Warszawa',
    postalCode: '00-373',
    licenseNumber: 'INS008',
    language: 'pl',
    emailNotifications: false,
    smsNotifications: false,
    createdAt: new Date('2024-01-17'),
    updatedAt: new Date(),
  },

  // STUDENTS - with optional locationId (their preferred branch)
  {
    id: 'student-1',
    email: 'michal.student@gmail.com',
    passwordHash,
    firstName: 'Michał',
    lastName: 'Zieliński',
    phone: '+48600111222',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1', // Preferred location
    dateOfBirth: new Date('2005-03-15'),
    address: 'ul. Prosta 10',
    city: 'Warszawa',
    postalCode: '00-838',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-02-01'),
    updatedAt: new Date(),
  },
  {
    id: 'student-2',
    email: 'kasia.student@gmail.com',
    passwordHash,
    firstName: 'Katarzyna',
    lastName: 'Dąbrowska',
    phone: '+48600222333',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-2', // Preferred location
    dateOfBirth: new Date('2004-07-22'),
    address: 'ul. Wołoska 20',
    city: 'Warszawa',
    postalCode: '02-675',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: false,
    createdAt: new Date('2024-02-02'),
    updatedAt: new Date(),
  },
  {
    id: 'student-3',
    email: 'pawel.student@gmail.com',
    passwordHash,
    firstName: 'Paweł',
    lastName: 'Jankowski',
    phone: '+48600333444',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-krakow-1', // Preferred location
    dateOfBirth: new Date('2003-11-10'),
    address: 'ul. Floriańska 15',
    city: 'Kraków',
    postalCode: '31-021',
    language: 'pl',
    emailNotifications: false,
    smsNotifications: true,
    createdAt: new Date('2024-02-03'),
    updatedAt: new Date(),
  },
  {
    id: 'student-4',
    email: 'ania.student@gmail.com',
    passwordHash,
    firstName: 'Anna',
    lastName: 'Wróbel',
    phone: '+48600444555',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-wroclaw-1', // Preferred location
    dateOfBirth: new Date('2005-01-25'),
    address: 'ul. Świdnicka 10',
    city: 'Wrocław',
    postalCode: '50-066',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-02-04'),
    updatedAt: new Date(),
  },
  {
    id: 'student-5',
    email: 'marek.student@gmail.com',
    passwordHash,
    firstName: 'Marek',
    lastName: 'Kaczmarek',
    phone: '+48600555666',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1', // Preferred location
    dateOfBirth: new Date('2004-09-08'),
    address: 'ul. Chmielna 25',
    city: 'Warszawa',
    postalCode: '00-020',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-02-05'),
    updatedAt: new Date(),
  },

  // More students with various locations
  {
    id: 'student-6',
    email: 'julia.student@gmail.com',
    passwordHash,
    firstName: 'Julia',
    lastName: 'Pawlak',
    phone: '+48600666777',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-poznan-1',
    dateOfBirth: new Date('2005-05-12'),
    address: 'ul. Półwiejska 5',
    city: 'Poznań',
    postalCode: '61-888',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-02-06'),
    updatedAt: new Date(),
  },
  {
    id: 'student-7',
    email: 'tomasz.student@gmail.com',
    passwordHash,
    firstName: 'Tomasz',
    lastName: 'Grabowski',
    phone: '+48600777888',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-gdansk-1',
    dateOfBirth: new Date('2004-12-30'),
    address: 'ul. Szeroka 20',
    city: 'Gdańsk',
    postalCode: '80-835',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: false,
    createdAt: new Date('2024-02-07'),
    updatedAt: new Date(),
  },
  {
    id: 'student-8',
    email: 'monika.student@gmail.com',
    passwordHash,
    firstName: 'Monika',
    lastName: 'Szymańska',
    phone: '+48600888999',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-warsaw-1',
    dateOfBirth: new Date('2005-02-18'),
    address: 'ul. Bracka 15',
    city: 'Warszawa',
    postalCode: '00-501',
    language: 'pl',
    emailNotifications: false,
    smsNotifications: true,
    createdAt: new Date('2024-02-08'),
    updatedAt: new Date(),
  },
  {
    id: 'student-9',
    email: 'adam.student@gmail.com',
    passwordHash,
    firstName: 'Adam',
    lastName: 'Kozłowski',
    phone: '+48600999000',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-krakow-1',
    dateOfBirth: new Date('2003-08-05'),
    address: 'ul. Grodzka 30',
    city: 'Kraków',
    postalCode: '31-006',

    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-02-09'),
    updatedAt: new Date(),
  },
  {
    id: 'student-10',
    email: 'ewa.student@gmail.com',
    passwordHash,
    firstName: 'Ewa',
    lastName: 'Mazurek',
    phone: '+48601000111',
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: 'location-wroclaw-1',
    dateOfBirth: new Date('2004-04-14'),
    address: 'ul. Oławska 8',
    city: 'Wrocław',
    postalCode: '50-123',
    language: 'pl',
    emailNotifications: true,
    smsNotifications: true,
    createdAt: new Date('2024-02-10'),
    updatedAt: new Date(),
  },

  // Additional students to make total 33
  ...Array.from({ length: 23 }, (_, i) => ({
    id: `student-${11 + i}`,
    email: `student${11 + i}@gmail.com`,
    passwordHash,
    firstName: ['Jakub', 'Aleksandra', 'Piotr', 'Natalia', 'Krzysztof', 'Magdalena', 'Łukasz', 'Karolina', 'Maciej', 'Agata'][i % 10],
    lastName: ['Nowicki', 'Sadowski', 'Duda', 'Włodarczyk', 'Borkowski', 'Chmielewski', 'Sokołowski', 'Wilk', 'Lis', 'Krajewski'][i % 10],
    phone: `+4860${2000000 + i}`,
    role: UserRole.STUDENT,
    status: UserStatus.ACTIVE,
    locationId: ['location-warsaw-1', 'location-warsaw-2', 'location-krakow-1', 'location-wroclaw-1', 'location-poznan-1', 'location-gdansk-1'][i % 6],
    dateOfBirth: new Date(2004 + (i % 2), i % 12, (i % 28) + 1),
    language: 'pl',
    emailNotifications: i % 2 === 0,
    smsNotifications: i % 3 !== 0,
    createdAt: new Date('2024-03-' + String((i % 28) + 1).padStart(2, '0')),
    updatedAt: new Date(),
  })),
]

module.exports = async function seedUsers(prisma, logger, options = {}) {
  try {
    const created = await prisma.user.createMany({
      data: users,
      skipDuplicates: true
    })
    
    logger.success(`✓ Created ${created.count} users`)
    return created
  } catch (error) {
    logger.error('✗ Failed to seed users:', error.message)
    throw error
  }
}