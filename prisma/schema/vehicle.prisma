// vehicle.prisma - Vehicle management module

model Vehicle {
  id                 String              @id @default(uuid())
  registrationNumber String              @unique @map("registration_number")
  make               String
  model              String
  year               Int
  transmission       VehicleTransmission
  fuelType           VehicleFuelType?    @map("fuel_type")
  insuranceExpiry    DateTime            @map("insurance_expiry")
  inspectionExpiry   DateTime            @map("inspection_expiry")
  status             VehicleStatus       @default(available)
  locationId         String?             @map("location_id")
  createdAt          DateTime            @default(now()) @map("created_at")

  // Relations
  location           Location?           @relation(fields: [locationId], references: [id])
  bookings           Booking[]
  instructors        InstructorVehicle[]

  @@map("vehicles")
  @@index([status])
  @@index([locationId])
}

model InstructorVehicle {
  instructorId String  @map("instructor_id")
  vehicleId    String  @map("vehicle_id")
  isPreferred  Boolean @default(false) @map("is_preferred")

  // Relations
  instructor   Instructor @relation(fields: [instructorId], references: [id])
  vehicle      Vehicle    @relation(fields: [vehicleId], references: [id])

  @@id([instructorId, vehicleId])
  @@map("instructor_vehicles")
}